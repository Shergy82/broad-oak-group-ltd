
{
  "entities": {
    "Trade": {
      "title": "Trade",
      "description": "Represents a specific trade, such as 'Plumber' or 'Electrician', and contains a list of standard tasks associated with that trade.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the trade (e.g., 'Plumber')."
        },
        "tasks": {
          "type": "array",
          "description": "A list of sub-tasks associated with the trade.",
          "items": {
            "$ref": "#/entities/TradeTask"
          }
        }
      },
      "required": ["name"]
    },
    "TradeTask": {
      "title": "Trade Task",
      "description": "A single task within a trade's checklist.",
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "description": "The description of the task."
        },
        "photoRequired": {
          "type": "boolean",
          "description": "Whether a photo is required upon completion of this task."
        },
        "evidenceTag": {
          "type": "string",
          "description": "A tag used to link a photo task to an evidence checklist item."
        }
      },
      "required": ["text", "photoRequired"]
    },
    "Unavailability": {
      "title": "Unavailability",
      "description": "Represents a period of unavailability for a user (e.g., holiday, sickness).",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the unavailable user."
        },
        "userName": {
            "type": "string",
            "description": "The name of the unavailable user."
        },
        "startDate": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of the unavailability period."
        },
        "endDate": {
          "type": "string",
          "format": "date-time",
          "description": "The end date of the unavailability period."
        },
        "reason": {
          "type": "string",
          "enum": ["Holiday", "Sickness", "Other"],
          "description": "The reason for the unavailability."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the record was created."
        }
      },
      "required": ["userId", "userName", "startDate", "endDate", "reason", "createdAt"]
    },
    "EvidenceChecklist": {
      "title": "Evidence Checklist",
      "description": "A list of required evidence items for a specific contract.",
      "type": "object",
      "properties": {
        "contractName": {
          "type": "string",
          "description": "The name of the contract this checklist applies to."
        },
        "items": {
          "type": "array",
          "description": "A list of evidence items.",
          "items": {
            "$ref": "#/entities/EvidenceChecklistItem"
          }
        }
      },
      "required": ["contractName"]
    },
    "EvidenceChecklistItem": {
      "title": "Evidence Checklist Item",
      "description": "A single item in an evidence checklist.",
      "type": "object",
      "properties": {
        "id": {
            "type": "string",
            "description": "A unique identifier for the checklist item."
        },
        "text": {
          "type": "string",
          "description": "The description of the evidence item. This text is used as the 'tag' to match against uploaded files."
        }
      },
      "required": ["id", "text"]
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/trade_tasks/{tradeId}": {
      "schema": {
        "$ref": "#/entities/Trade"
      },
      "description": "Stores the lists of standard tasks, organized by trade."
    },
    "/unavailability/{unavailabilityId}": {
        "schema": {
            "$ref": "#/entities/Unavailability"
        },
        "description": "Stores unavailability records for all users."
    },
    "/evidence_checklists/{contractName}": {
      "schema": {
        "$ref": "#/entities/EvidenceChecklist"
      },
      "description": "Stores the evidence checklists for each contract."
    }
  }
}
