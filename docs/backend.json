
{
  "entities": {
    "Trade": {
      "title": "Trade",
      "description": "Represents a specific trade, such as 'Plumber' or 'Electrician', and contains a list of standard tasks associated with that trade.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The name of the trade (e.g., 'Plumber')."
        },
        "tasks": {
          "type": "array",
          "description": "A list of sub-tasks associated with the trade.",
          "items": {
            "$ref": "#/entities/TradeTask"
          }
        }
      },
      "required": ["name"]
    },
    "TradeTask": {
      "title": "Trade Task",
      "description": "A single task within a trade's checklist.",
      "type": "object",
      "properties": {
        "text": {
          "type": "string",
          "description": "The description of the task."
        },
        "photoRequired": {
          "type": "boolean",
          "description": "Whether a photo is required upon completion of this task."
        }
      },
      "required": ["text", "photoRequired"]
    },
    "Unavailability": {
      "title": "Unavailability",
      "description": "Represents a period of unavailability for a user (e.g., holiday, sickness).",
      "type": "object",
      "properties": {
        "userId": {
          "type": "string",
          "description": "The ID of the unavailable user."
        },
        "userName": {
            "type": "string",
            "description": "The name of the unavailable user."
        },
        "startDate": {
          "type": "string",
          "format": "date-time",
          "description": "The start date of the unavailability period."
        },
        "endDate": {
          "type": "string",
          "format": "date-time",
          "description": "The end date of the unavailability period."
        },
        "reason": {
          "type": "string",
          "enum": ["Holiday", "Sickness", "Other"],
          "description": "The reason for the unavailability."
        },
        "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "The timestamp when the record was created."
        }
      },
      "required": ["userId", "userName", "startDate", "endDate", "reason", "createdAt"]
    },
    "FunctionLog": {
      "title": "Function Log",
      "description": "A log entry from a Cloud Function for diagnostic purposes.",
      "type": "object",
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "date-time"
        },
        "functionName": {
          "type": "string"
        },
        "shiftId": {
          "type": "string"
        },
        "userId": {
          "type": "string"
        },
        "level": {
          "type": "string",
          "enum": ["info", "warn", "error"]
        },
        "message": {
          "type": "string"
        },
        "payload": {
          "type": "object"
        }
      },
      "required": ["timestamp", "functionName", "level", "message"]
    }
  },
  "auth": {
    "providers": ["email"]
  },
  "firestore": {
    "/trade_tasks/{tradeId}": {
      "schema": {
        "$ref": "#/entities/Trade"
      },
      "description": "Stores the lists of standard tasks, organized by trade."
    },
    "/unavailability/{unavailabilityId}": {
        "schema": {
            "$ref": "#/entities/Unavailability"
        },
        "description": "Stores unavailability records for all users."
    },
    "/function_logs/{logId}": {
        "schema": {
            "$ref": "#/entities/FunctionLog"
        },
        "description": "Stores diagnostic logs from backend Cloud Functions."
    }
  }
}
